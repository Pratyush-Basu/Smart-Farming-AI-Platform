<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>üå± Fertilizer Recommendation Result</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: linear-gradient(to right, #f1f8e9, #e8f5e9);
            font-family: "Poppins", sans-serif;
        }
        .container {
            max-width: 900px;
            margin-top: 40px;
            margin-bottom: 50px;
        }
        .card {
            border-radius: 14px;
            box-shadow: 0 4px 14px rgba(0,0,0,0.12);
        }
        .table th {
            background-color: #e8f5e9;
        }
        footer {
            margin-top: 30px;
            text-align: center;
            color: #555;
        }
    </style>
</head>

<body>
<div class="container">

    <!-- Header -->
    <div class="text-center mb-4">
        <h2 class="fw-bold text-success">üåæ Fertilizer Recommendation</h2>
        <p class="text-muted">
            Crop-wise fertilizer requirement based on soil nutrient analysis
        </p>
    </div>

    <!-- Result Card -->
    <div class="card p-4">

        <h4 class="mb-3">
            üå± Crop: <span class="text-success">{{ crop|capitalize }}</span>
        </h4>

        <p>
            <b>Land Area:</b> {{ area }} acre
        </p>

        <hr>

        <!-- Soil vs Ideal NPK -->
        <h5 class="text-success mb-3"> Soil vs Ideal NPK (kg/acre)</h5>

        <div class="table-responsive">
            <table class="table table-bordered text-center">
                <thead>
                <tr>
                    <th>Nutrient</th>
                    <th>Soil Value</th>
                    <th>Ideal Value</th>
                    <th>Deficiency</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>Nitrogen (N)</td>
                    <td>{{ soil.N }}</td>
                    <td>{{ ideal.N }}</td>
                    <td>{{ deficiency.N }}</td>
                </tr>
                <tr>
                    <td>Phosphorus (P)</td>
                    <td>{{ soil.P }}</td>
                    <td>{{ ideal.P }}</td>
                    <td>{{ deficiency.P }}</td>
                </tr>
                <tr>
                    <td>Potassium (K)</td>
                    <td>{{ soil.K }}</td>
                    <td>{{ ideal.K }}</td>
                    <td>{{ deficiency.K }}</td>
                </tr>
                </tbody>
            </table>
        </div>

        <hr>

        <!-- Fertilizer Recommendation -->
        <h5 class="text-success mb-3"> Recommended Fertilizers (kg)</h5>

        {% if fertilizer %}
            <ul class="list-group">
                {% for name, qty in fertilizer.items() %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        {{ name }}
                        <span class="badge bg-success rounded-pill">
                            {{ qty }} kg
                        </span>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-success fw-semibold">
                Soil nutrients are sufficient. No fertilizer is required.
            </p>
        {% endif %}

        <hr>

        <!-- Explanation 
        <h6 class="text-muted">üìò How this is calculated</h6>
        <ul class="text-muted small">
            <li>Ideal NPK values are taken from standard crop nutrient data.</li>
            <li>Soil nutrient values are compared with ideal values.</li>
            <li>Deficiency is converted into fertilizer quantity using standard nutrient percentages.</li>
            <li>Calculation is scaled according to land area.</li>
        </ul>
        -->


        <p class="text-muted small">
        Explanation Language:
        <b>
            {% if language == "bengali" %}‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ
            {% elif language == "hindi" %}‡§π‡§ø‡§Ç‡§¶‡•Ä
            {% else %}English
            {% endif %}
        </b>
        </p>

        <hr>

        <h5 class="text-success mb-3"> AI Farmer Explanation</h5>

        <div class="alert alert-success" style="
            white-space: pre-line;
            font-size: 15px;
            line-height: 1.6;
        ">
        {{ ai_explanation }}
        </div>


        <!-- Buttons -->
        <div class="text-center mt-4">
            <a href="/fertilizer" class="btn btn-outline-success me-2">
                üîÅ New Calculation
            </a>
            <a href="http://127.0.0.1:5500/dashboard.html" class="btn btn-outline-secondary">
            ‚¨Ö Back to Dashboard
            </a>

        </div>

    </div>

    <!-- Footer -->
    <footer>
        <p><b>¬© 2025 Krishi ‚Äì ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶ï</b></p>
    </footer>

</div>
</body>
</html>
